var signals = require("signals");

function PortalLink(portalA, portalB) {
	this.portalA = portalA;
	this.portalB = portalB;
	this.requestRenderPassSignal = new signals.Signal();

	portalA.portalLink = this;
	portalB.portalLink = this;

	this.other = other.bind(this);
	this.requestAddingRenderPassOfOtherWorld = requestAddingRenderPassOfOtherWorld.bind(this);
}

function other(from) {
	if(from === this.portalA) {
		return this.portalB;
	} else if(from === this.portalB) {
		return this.portalA;
	}
}

function requestAddingRenderPassOfOtherWorld(from) {
	var otherPortal = other(from);
	this.requestRenderPassSignal.dispatch(otherPortal);
}

module.exports = PortalLink;